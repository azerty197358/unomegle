<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SparkChat â€” Omegle-like UI</title>

<style>
  /* -------- Variables -------- */
  :root{
    --topbar-bg:#fff;
    --accent-blue:#3ea8ff;   /* Ø²Ø± Skip / Ø£Ø¬Ø²Ø§Ø¡ */
    --accent-blue-dark:#2d86e6;
    --btn-blue:#1f8cff;      /* used for other buttons */
    --muted:#f3f5f7;
    --border:#e6e6e8;
    --radius:10px;
    --shadow: 0 6px 18px rgba(15,30,60,0.08);
    --text:#0f1720;
  }

  /* Dark mode variables */
  .dark{
    --topbar-bg:#0f1115;
    --muted:#111318;
    --border:#222;
    --text:#e9eef7;
  }

  /* Reset */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;font-family: "Segoe UI", Tahoma, Arial, sans-serif;color:var(--text);background:#fafbfc}
  body{overflow:hidden}

  /* -------- Topbar -------- */
  .topbar{
    height:64px; background:var(--topbar-bg); border-bottom:1px solid var(--border);
    display:flex; align-items:center; justify-content:space-between; padding:0 18px;
  }

  /* Logo: left-aligned (visual like screenshot) */
  .logo-wrap{display:flex; align-items:center; gap:12px}
  .logo-mark{
    width:46px;height:46px;border-radius:10px;background:linear-gradient(180deg,#38a1ff,#1f77d9);
    display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:22px;box-shadow:0 2px 6px rgba(0,0,0,0.08)
  }
  /* Logo text split into spans for flip */
  .logo{
    display:flex; gap:4px; align-items:center; font-weight:800; font-size:30px; user-select:none;
    color:#ff8b00;
  }
  .logo span{display:inline-block; transition:0.25s}
  .logo span:nth-child(n+6){ color:#2f9cff } /* color change for second word */

  /* flip animation for a letter */
  .flip{ animation: flipAnim 0.6s ease forwards }
  @keyframes flipAnim {
    0%{ transform: rotateY(0) scale(1) }
    50%{ transform: rotateY(180deg) scale(1.25) }
    100%{ transform: rotateY(360deg) scale(1) }
  }

  /* Topbar right controls */
  .top-controls{ display:flex; align-items:center; gap:12px }
  .notify-box{position:relative}
  .notify-dot{ width:10px;height:10px;background:#ff3b30;border-radius:50%;position:absolute;top:0;right:0; }

  .icon-btn{
    background:transparent;border:none;padding:8px;border-radius:8px;cursor:pointer;font-size:16px;color:var(--text)
  }
  .primary-btn{
    background:var(--btn-blue); color:#fff; border:none; padding:8px 14px; border-radius:12px; cursor:pointer; font-weight:700;
    box-shadow:0 4px 10px rgba(31,140,255,0.18)
  }

  /* -------- Stage (main) -------- */
  .stage{
    position:absolute; top:64px; bottom:0; left:0; right:0; display:flex; gap:18px; padding:18px; align-items:flex-start;
  }

  /* Left column (ad + video stack) */
  .left-col{ width:360px; min-width:300px; display:flex; flex-direction:column; gap:14px; }

  .ad-thumb{
    background:#fff; border-radius:12px; overflow:hidden; border:1px solid var(--border); box-shadow:var(--shadow);
    height:160px; display:flex; align-items:center; justify-content:center;
  }
  .ad-thumb img{ width:100%; height:100%; object-fit:cover; display:block }

  .video-frame{
    background:#000; border-radius:12px; overflow:hidden; position:relative; border:6px solid #fff; box-shadow:0 6px 18px rgba(0,0,0,0.06);
    height:300px; display:flex; align-items:center; justify-content:center;
  }
  .video-frame.small{ height:220px }

  .video-label{
    position:absolute; top:10px; left:10px; background:#fff; color:#222; padding:6px 10px; border-radius:8px; font-weight:700; font-size:14px;
  }

  .watermark{
    position:absolute; bottom:10px; left:10px; font-weight:700; color:rgba(255,255,255,0.9);
  }

  /* mic and report buttons */
  #micBtn{ position:absolute; bottom:10px; right:10px; min-width:48px; min-height:48px; border-radius:50%; border:none; background:var(--btn-blue); color:#fff; cursor:pointer; font-size:18px; }
  #reportBtn{ position:absolute; bottom:14px; left:12px; background:#ff3b30; color:#fff; border:none; padding:6px 10px; border-radius:8px; cursor:pointer; font-size:12px }

  /* -------- Right column (chat) -------- */
  .right-col{ flex:1; display:flex; flex-direction:column; min-width:520px; height:100%; border-radius:12px; overflow:hidden; border:1px solid var(--border); background:#fff; box-shadow:var(--shadow) }

  .chat-area{
    flex:1; padding:28px 30px; background:#fafbfc; overflow:auto; display:flex; flex-direction:column; gap:10px;
  }

  /* center system sentence like screenshot */
  .system-note{
    margin:auto; text-align:center; color:#6b7280; font-style:italic; font-weight:600;
  }

  /* Input area sticky bottom */
  .chat-input-row{ padding:14px; background:transparent; border-top:1px solid var(--border); display:flex; align-items:center; gap:12px; }
  .input-wrapper{ flex:1; display:flex; align-items:center; gap:10px; background:#fff; padding:8px 10px; border-radius:12px; border:1px solid #e9eef4; box-shadow:inset 0 1px 0 rgba(255,255,255,0.6) }

  #chatInput{ flex:1; border:none; outline:none; padding:12px 8px; font-size:15px; color:var(--text); background:transparent }
  #chatInput::placeholder{ color:#9aa4b2 }

  /* Skip button like screenshot, left, with small Esc text */
  #skipBtn{
    background:var(--accent-blue); color:#fff; border:none; padding:10px 16px; border-radius:12px; font-weight:700; cursor:pointer;
    display:flex; align-items:center; gap:8px; box-shadow:0 6px 18px rgba(62,168,255,0.18);
  }
  #skipBtn .hint{ font-size:12px; opacity:0.9; background:rgba(255,255,255,0.12); padding:4px 8px; border-radius:8px }

  /* plus small button + send button on right */
  .right-send { display:flex; gap:10px; align-items:center }
  .plus-btn{ width:44px; height:44px; border-radius:10px; border:none; background:#fff; box-shadow:0 6px 18px rgba(0,0,0,0.06); cursor:pointer; font-size:20px; color:var(--btn-blue); }
  #sendBtn{ background:var(--accent-blue-dark); color:#fff; border:none; padding:10px 16px; border-radius:12px; cursor:pointer; font-weight:700; box-shadow:0 6px 18px rgba(31,120,230,0.18) }

  /* small responsive tweaks */
  @media (max-width: 1100px){
    .left-col{ width:300px }
    .right-col{ min-width:420px }
  }
  @media (max-width: 820px){
    body{overflow:auto}
    .stage{flex-direction:column; padding:12px}
    .left-col{ width:100%; order:2 }
    .right-col{ order:1; min-width:unset }
  }

  /* hide native video element outlines */
  video { display:block; width:100%; height:100%; object-fit:cover; background:#111 }
</style>
</head>

<body>

  <div class="topbar">
    <div class="logo-wrap">
      <div class="logo-mark">S</div>

      <!-- Logo text: each char is a span so flip anim can target one -->
      <div class="logo" id="logo">
        <span>S</span><span>p</span><span>a</span><span>r</span><span>k</span>
        <span>C</span><span>h</span><span>a</span><span>t</span>
      </div>
    </div>

    <div class="top-controls">
      <div class="notify-box">
        <button class="icon-btn" id="notifyBtn">ðŸ””</button>
        <div class="notify-dot" id="notifyDot" style="display:none"></div>
      </div>

      <button id="darkToggle" class="icon-btn" title="Dark / Light">ðŸŒ™</button>
      <button id="exitBtn" class="icon-btn">Exit</button>
    </div>
  </div>

  <div class="stage">

    <div class="left-col">

      <!-- Ad / promo (uses the uploaded file path as image src) -->
      <div class="ad-thumb">
        <!-- using your uploaded file as the ad image -->
        <img src="/mnt/data/912188d2-8651-4cf0-93ed-0e32cca84d16.png" alt="ad"/>
      </div>

      <!-- remote video (top) -->
      <div class="video-frame">
        <div class="video-label">Stranger</div>
        <div class="watermark">SparkChat</div>
        <div id="remoteSpinner" style="width:60px;height:60px;border-radius:50%;border:6px solid #fff;border-top-color:transparent;animation:spin 1s linear infinite;position:absolute;z-index:5"></div>
        <video id="remoteVideo" autoplay playsinline></video>
      </div>

      <!-- local video (bottom) -->
      <div class="video-frame small">
        <div class="video-label">You</div>
        <div class="watermark">SparkChat</div>
        <video id="localVideo" autoplay muted playsinline></video>
        <button id="micBtn" title="Mic">ðŸŽ¤</button>
      </div>

    </div>

    <!-- Right column: chat -->
    <div class="right-col">
      <div id="chatMessages" class="chat-area">
        <div class="system-note">You are now talking to a stranger on SparkChat!<br><span style="font-weight:600;color:#9aa4b2">Stranger is from NW, Germany</span></div>
      </div>

      <div class="chat-input-row">
        <button id="skipBtn">
          <span style="display:inline-block">Skip</span>
          <span class="hint">Esc</span>
        </button>

        <div class="input-wrapper">
          <input id="chatInput" placeholder="Type a message..." disabled />
        </div>

        <div class="right-send">
          <button class="plus-btn" title="More">+</button>
          <button id="sendBtn">Send</button>
        </div>
      </div>
    </div>

  </div>

  <!-- scripts (keep your sockets/script.js if any) -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>

  <script>
    /* Dark Mode toggle */
    const darkToggle = document.getElementById('darkToggle');
    darkToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      darkToggle.innerText = document.body.classList.contains('dark') ? 'â˜€ï¸' : 'ðŸŒ™';
    });

    /* Notify demo (show/hide dot) */
    const notifyBtn = document.getElementById('notifyBtn');
    const notifyDot = document.getElementById('notifyDot');
    // sample toggle for demo:
    notifyBtn.addEventListener('click', ()=> {
      notifyDot.style.display = (notifyDot.style.display === 'none') ? 'block' : 'none';
    });

    /* Report (kept if you want) - you already had reportBtn in previous code, keep ability */
    // keep simple confirm if report exists
    // (If you want to keep the previous report button, re-add it in markup â€” currently omitted to match screenshot)
    
    /* Skip button - visual */
    document.getElementById('skipBtn').addEventListener('click', ()=> {
      // Here you should trigger your existing skip logic (socket event etc.)
      console.log('Skip pressed â€” trigger your skip logic here.');
      // Example: socket.emit('skip');
    });

    /* Send & input enabling (placeholder for your logic) */
    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    // enable example (remove in production if controlled by connection state)
    // chatInput.disabled = false; sendBtn.disabled = false;

    sendBtn.addEventListener('click', ()=> {
      const text = chatInput.value.trim();
      if(!text) return;
      // send via your existing socket or logic
      const area = document.getElementById('chatMessages');
      const msg = document.createElement('div');
      msg.className = 'msg you';
      msg.style.marginLeft = 'auto';
      msg.style.background = '#e6f4ff';
      msg.style.padding = '10px 14px';
      msg.style.borderRadius = '12px';
      msg.textContent = text;
      area.appendChild(msg);
      chatInput.value = '';
      area.scrollTop = area.scrollHeight;
    });

    /* Logo flip animation: flip one letter every 3 seconds fully then return */
    const logoLetters = document.querySelectorAll('#logo span');
    function flipRandomLetter(){
      if(!logoLetters.length) return;
      const idx = Math.floor(Math.random() * logoLetters.length);
      const el = logoLetters[idx];
      el.classList.add('flip');
      setTimeout(()=> el.classList.remove('flip'), 600);
    }
    setInterval(flipRandomLetter, 3000);

    /* small spinner keyframes injection (used above) */
    (function addSpinKeyframes(){
      const s = document.createElement('style');
      s.innerHTML = '@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}';
      document.head.appendChild(s);
    })();

    /* NOTE: Preserve your existing video/chat functionality:
       - remoteVideo and localVideo elements kept (ids: remoteVideo, localVideo)
       - Keep your script.js/socket.io logic to attach streams and events.
       - This template only changes UI; integrate your app logic into the listed hooks above.
    */
  </script>
</body>
</html>
