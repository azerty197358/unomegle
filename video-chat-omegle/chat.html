<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SparkChat</title>

<style>
  :root { --blue:#2ea3ff; --dark:#111; --light:#ffffff; --border:#e6d7c8; }
  *{margin:0;padding:0;box-sizing:border-box;}

  body{
    background:#fff;
    font-family:Arial, Helvetica, sans-serif;
    height:100vh;
    overflow:hidden;
  }

  .topbar{
    height:60px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:0 16px;
    border-bottom:1px solid #eee;
    background:#fff;
    flex-shrink:0;
  }

  .logo{font-size:26px;font-weight:bold;color:#ff9a00;}
  .logo span{color:#3fa0ff;}

  #exitBtn{
    background:red;color:#fff;padding:10px 18px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;
  }

  .stage{
    position:absolute;top:60px;bottom:0;left:0;right:0;
    display:flex;gap:10px;padding:10px;overflow:hidden;
  }

  .left-col{
    width:350px;min-width:260px;display:flex;flex-direction:column;gap:10px;flex-shrink:0;
  }

  .video-frame{
    position:relative;border-radius:12px;border:6px solid var(--border);
    overflow:hidden;background:#000;display:flex;justify-content:center;align-items:center;
  }

  .video-frame.top{height:300px;}
  .video-frame.bottom{height:240px;}

  video{width:100%;height:100%;object-fit:cover;}

  .watermark{
    position:absolute;bottom:10px;left:10px;font-size:18px;font-weight:bold;color:#ffffffaa;pointer-events:none;z-index:15;
  }

  #remoteSpinner,#localSpinner{
    position:absolute;width:45px;height:45px;border:5px solid #fff;border-top-color:transparent;border-radius:50%;
    animation:spin 1s linear infinite;display:none;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;
  }
  @keyframes spin{to{transform:translate(-50%,-50%) rotate(360deg);}}

  .video-label{
    position:absolute;top:8px;left:8px;background:#fff;padding:4px 10px;border-radius:6px;font-size:12px;z-index:20;
  }

  #reportBtn,#micBtn{
    position:absolute;bottom:10px;right:10px;
    background:#2ea3ff;color:#fff;padding:10px 12px;font-size:18px;border-radius:50%;cursor:pointer;z-index:30;
  }
  #reportBtn{background:red;}

  .right-col{
    flex:1;display:flex;flex-direction:column;border:6px solid var(--border);border-radius:10px;background:#fff;overflow:hidden;
  }

  .chat-area{
    flex:1;padding:14px;overflow-y:auto;display:flex;flex-direction:column;gap:8px;background:#fff;
  }

  .warning-msg{
    background:#ffe1e1;color:#b30000;padding:10px;border-radius:10px;text-align:center;border:1px solid #ffb3b3;
  }

  .chat-input-row{
    display:flex;flex-direction:column;gap:8px;padding:10px;background:#fafafa;border-top:1px solid #ddd;
  }

  #status{
    padding:6px 10px;font-size:14px;background:#fafafa;border-radius:6px;border:1px solid #ddd;width:100%;text-align:center;
  }

  .input-container{
    width:100%;
    display:flex;
    align-items:center;
    gap:6px;
  }

  #chatInput{
    flex:1;
    padding:10px;
    border:1px solid #ccc;
    border-radius:8px;
    font-size:14px;
  }

  #sendBtn{
    width:38px;
    height:38px;
    background:#2ea3ff;
    color:#fff;
    border-radius:6px;
    padding:0;
    font-size:14px;
    cursor:pointer;
  }

  #skipBtn{
    background:#ff9a00;
    color:#fff;
    padding:10px 14px;
    border-radius:8px;
    cursor:pointer;
    white-space:nowrap;
  }

  #startBtn, #stopBtn { display:none !important; }


/* ====================== RESPONSIVE DESIGN ====================== */

  /* ÿßŸÑŸáŸàÿßÿ™ŸÅ ‚Äî width ÿ£ŸÇŸÑ ŸÖŸÜ 768px */
  @media (max-width: 768px) {

    body{
      overflow:auto; 
    }

    .stage{
      flex-direction:column;
      padding:6px;
      gap:6px;
      position:relative;
      top:0;
      height:auto;
    }

    .left-col{
      width:100%;
      min-width:100%;
      flex-direction:column;
      gap:10px;
    }

    .video-frame.top,
    .video-frame.bottom{
      height:200px;
    }

    #reportBtn,#micBtn{
      width:40px;
      height:40px;
      font-size:18px;
    }

    .right-col{
      width:100%;
      height:auto;
      flex:unset;
    }

    .chat-area{
      max-height:260px;
      padding:10px;
    }

    .chat-input-row{
      position:sticky;
      bottom:0;
      background:#fff;
      z-index:20;
    }

    #status{
      font-size:13px;
    }

    .input-container{
      flex-direction:row-reverse;
    }

    #sendBtn{
      width:42px;
      height:42px;
      font-size:16px;
    }

    #chatInput{
      font-size:16px;
      padding:10px;
    }

    #skipBtn{
      font-size:14px;
      padding:8px 12px;
    }
  }

  /* ÿßŸÑÿ¥ÿßÿ¥ÿßÿ™ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© ÿ¨ÿØÿßŸã ‚Äî ÿ£ŸÇŸÑ ŸÖŸÜ 450px */
  @media (max-width: 450px){
    .video-frame.top,
    .video-frame.bottom{
      height:160px;
    }

    .logo{ font-size:22px; }
    #exitBtn{ padding:8px 14px; font-size:14px; }
  }

</style>
</head>

<body>

<div class="topbar">
  <div class="logo">Spark<span>Chat</span></div>
  <button id="exitBtn">Exit</button>
</div>

<div class="stage">

  <div class="left-col">
    <div class="video-frame top">
      <button id="reportBtn">üö®</button>
      <div class="watermark">SparkChat</div>
      <div class="video-label">Stranger</div>
      <video id="remoteVideo" autoplay playsinline></video>
      <div id="remoteSpinner"></div>
    </div>

    <div class="video-frame bottom">
      <button id="micBtn">üé§</button>
      <div class="watermark">SparkChat</div>
      <div class="video-label">You</div>
      <video id="localVideo" autoplay muted playsinline></video>
      <div id="localSpinner"></div>
    </div>
  </div>

  <div class="right-col">
    <div id="chatMessages" class="chat-area">
      <div class="warning-msg">‚ö†Ô∏è ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑÿ•ÿ®ŸÑÿßÿ∫ ŸÅŸàÿ±ÿßŸã ÿπŸÜ ÿ£Ÿä ÿ¥ÿÆÿµ ŸäŸÇŸàŸÖ ÿ®ÿ≠ÿ±ŸÉÿßÿ™ ÿ•ÿ®ÿßÿ≠Ÿäÿ© ÿ£Ÿà ÿ∫Ÿäÿ± ŸÑÿßÿ¶ŸÇÿ©.</div>
      <div class="msg system">Connecting...</div>
    </div>

    <div class="chat-input-row">
      <div id="status">Loading...</div>

      <div class="input-container">
        <button id="sendBtn" disabled>‚û§</button>
        <input id="chatInput" placeholder="Type..." disabled />
        <button id="skipBtn">Skip</button>
      </div>

    </div>
  </div>
</div>

<script>
document.getElementById("exitBtn").onclick = () => location.href="index.html";

window.onload = () => {
    if (typeof startChat === "function") {
        startChat(); 
    }
};
</script>

<script src="/socket.io/socket.io.js"></script>
<script src="script.js"></script>

</body>
</html>
